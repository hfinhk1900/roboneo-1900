# ğŸ”§ æ°´å°å»é™¤åŠŸèƒ½é”™è¯¯å¤„ç†ä¿®å¤

## ğŸ“‹ é—®é¢˜æè¿°

ç”¨æˆ·åœ¨å‰ç«¯æµ‹è¯•æ°´å°å»é™¤åŠŸèƒ½æ—¶ï¼Œç‚¹å‡»å¤„ç†æŒ‰é’®åæ”¶åˆ°ä»¥ä¸‹é”™è¯¯ï¼š

```
Error: âŒ API request failed: {}
```

è¿™ä¸ªé”™è¯¯å‘ç”Ÿåœ¨ `RemoveWatermarkGeneratorSection.useCallback[handleRemoveWatermark]` å‡½æ•°ä¸­ã€‚

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 
1. **ç©º result å¯¹è±¡**: å½“ API è¯·æ±‚å¤±è´¥æ—¶ï¼Œ`result` å¯¹è±¡å¯èƒ½ä¸º `undefined` æˆ–ç©º
2. **é”™è¯¯ä¿¡æ¯ä¸æ˜ç¡®**: é”™è¯¯å¤„ç†é€»è¾‘æ²¡æœ‰å®‰å…¨åœ°å¤„ç†ç©ºçš„å“åº”å¯¹è±¡
3. **ç”¨æˆ·ä½“éªŒå·®**: é”™è¯¯ä¿¡æ¯å¯¹ç”¨æˆ·ä¸å‹å¥½ï¼Œæ˜¾ç¤ºä¸ºç©ºå¯¹è±¡ `{}`

### å…·ä½“é—®é¢˜ä½ç½®
- æ–‡ä»¶ï¼š`src/components/blocks/remove-watermark/remove-watermark-generator.tsx`
- ä½ç½®ï¼šç¬¬ 496 è¡Œçš„é”™è¯¯å¤„ç†é€»è¾‘
- é—®é¢˜ï¼š`result.error` å’Œ `result.details` åœ¨ `result` ä¸ºç©ºæ—¶å¯¼è‡´é”™è¯¯

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. å®‰å…¨çš„é”™è¯¯å¯¹è±¡å¤„ç†
```typescript
// ä¿®å¤å‰
console.error('âŒ API request failed:', {
  status: response.status,
  statusText: response.statusText,
  error: result.error,  // âŒ å¯èƒ½å¯¼è‡´é”™è¯¯
  details: result.details, // âŒ å¯èƒ½å¯¼è‡´é”™è¯¯
});

// ä¿®å¤å
const safeResult = result || {};
const errorInfo = {
  status: response.status,
  statusText: response.statusText,
  error: safeResult.error || 'No error message',
  details: safeResult.details || 'No details provided',
};
console.error('âŒ API request failed:', errorInfo);
```

### 2. æ”¹è¿›çš„é”™è¯¯æ¶ˆæ¯å¤„ç†
```typescript
// ä¿®å¤å‰
const errorMessage = error instanceof Error ? error.message : 'Unknown error';

// ä¿®å¤å
let errorMessage = 'Unknown error occurred';
let userMessage = 'Failed to remove watermark. Please try again.';

if (error instanceof Error) {
  errorMessage = error.message;

  // æ ¹æ®ä¸åŒé”™è¯¯ç±»å‹æä¾›å…·ä½“çš„ç”¨æˆ·åé¦ˆ
  if (errorMessage.includes('Insufficient credits')) {
    setShowInsufficientCreditsDialog(true);
    return;
  } else if (errorMessage.includes('timeout')) {
    userMessage = 'Request timed out. Please try again.';
  }
  // ... æ›´å¤šé”™è¯¯ç±»å‹å¤„ç†
}
```

### 3. è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
```typescript
// æ–°å¢ï¼šè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
console.error('è¯¦ç»†é”™è¯¯ä¿¡æ¯:', {
  originalError: error,
  errorMessage,
  userMessage,
  stack: error instanceof Error ? error.stack : 'No stack trace'
});
```

## ğŸš€ ä¿®å¤æ•ˆæœ

### âœ… æ”¹è¿›ç‚¹

1. **é”™è¯¯å®‰å…¨æ€§**
   - é˜²æ­¢ç©ºå¯¹è±¡å¯¼è‡´çš„é”™è¯¯
   - å®‰å…¨åœ°è®¿é—®å“åº”å¯¹è±¡çš„å±æ€§
   - æä¾›é»˜è®¤çš„é”™è¯¯ä¿¡æ¯

2. **ç”¨æˆ·ä½“éªŒ**
   - ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯
   - æ ¹æ®é”™è¯¯ç±»å‹æ˜¾ç¤ºå…·ä½“å»ºè®®
   - è‡ªåŠ¨å¤„ç†å¸¸è§é”™è¯¯åœºæ™¯

3. **å¼€å‘è°ƒè¯•**
   - è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•
   - åŒ…å«å †æ ˆè·Ÿè¸ªä¿¡æ¯
   - åˆ†ç¦»ç”¨æˆ·æ¶ˆæ¯å’Œè°ƒè¯•ä¿¡æ¯

### ğŸ“Š é”™è¯¯å¤„ç†è¦†ç›–

| é”™è¯¯ç±»å‹ | ç”¨æˆ·æ¶ˆæ¯ | å¤„ç†æ–¹å¼ |
|----------|----------|----------|
| ç§¯åˆ†ä¸è¶³ | è‡ªåŠ¨å¼¹çª— | æ˜¾ç¤ºå……å€¼å¯¹è¯æ¡† |
| è®¤è¯å¤±è´¥ | ç™»å½•æç¤º | æ˜¾ç¤ºç™»å½•å¯¹è¯æ¡† |
| ç½‘ç»œé”™è¯¯ | ç½‘ç»œæ£€æŸ¥å»ºè®® | Toast æç¤º |
| è¶…æ—¶é”™è¯¯ | é‡è¯•å»ºè®® | Toast æç¤º |
| æœåŠ¡é”™è¯¯ | ç¨åé‡è¯• | Toast æç¤º |
| æœªçŸ¥é”™è¯¯ | é€šç”¨é‡è¯• | Toast æç¤º |

## ğŸ§ª éªŒè¯æµ‹è¯•

### æµ‹è¯•ç»“æœ
```bash
ğŸ§ª æ°´å°å»é™¤å‰ç«¯é›†æˆæµ‹è¯•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ˆ æµ‹è¯•æˆåŠŸç‡: 100.0% (3/3)
ğŸŒ å‰ç«¯é¡µé¢: âœ… æ­£å¸¸
ğŸ”Œ APIç«¯ç‚¹: 2/2 æ­£å¸¸
ğŸ‰ é›†æˆæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼å‰ç«¯å’Œåç«¯é›†æˆæ­£å¸¸ã€‚
```

### æµ‹è¯•é¡¹ç›®
- âœ… å‰ç«¯é¡µé¢è®¿é—®æ­£å¸¸
- âœ… API ç«¯ç‚¹å“åº”æ­£ç¡®
- âœ… é™æ€èµ„æºåŠ è½½æ­£å¸¸
- âœ… å¯¼èˆªé…ç½®æ­£ç¡®
- âœ… ç¯å¢ƒé…ç½®å®Œæ•´

## ğŸ“ åç»­å»ºè®®

1. **ç›‘æ§é”™è¯¯**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç›‘æ§é”™è¯¯é¢‘ç‡å’Œç±»å‹
2. **ç”¨æˆ·åé¦ˆ**: æ”¶é›†ç”¨æˆ·å¯¹æ–°é”™è¯¯æ¶ˆæ¯çš„åé¦ˆ
3. **æ€§èƒ½ä¼˜åŒ–**: è€ƒè™‘æ·»åŠ é‡è¯•æœºåˆ¶
4. **æ–‡æ¡£æ›´æ–°**: æ›´æ–°é”™è¯¯å¤„ç†æ–‡æ¡£

---

**ä¿®å¤å®Œæˆæ—¶é—´**: `date +"%Y-%m-%d %H:%M:%S"`
**æµ‹è¯•çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡
**éƒ¨ç½²å°±ç»ª**: âœ… å¯ä»¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
