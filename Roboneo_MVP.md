# RoboSticker MVP 产品文档

## 1. 产品概述

### 1.1 产品背景
在当今内容创作爆发的时代，普通用户对AI图像和视频生成的需求日益增长，尤其是将图片中主体物体提取为透明背景，以及基于文本或图像生成新内容的需求。RoboSticker旨在通过整合先进的AI技术，提供一站式生成和处理解决方案，让这一过程变得简单且经济实惠。

### 1.2 产品定义
RoboSticker是一款多功能AI创意平台，初期MVP阶段专注于快速、高质量地将上传图片中的物体自动分离并转换为透明背景贴纸（sticker）。后续将扩展为支持文生图、文生视频、图生视频的全方位AI创作平台。用户通过简单的操作即可获得专业级创意内容。

### 1.3 目标用户
- **内容创作者**：需要快速制作素材的社交媒体博主、写作者
- **电商卖家**：需要产品图像处理和营销素材的店主
- **设计新手**：没有专业设计技能的普通设计爱好者
- **营销人员**：需要快速制作宣传素材的市场团队
- **普通消费者**：想制作个性化表情包、贴纸和视频的用户

### 1.4 市场定位
- **价格定位**：提供Pro和Ultimate两种订阅级别，满足不同用户需求
- **功能定位**：
  - **MVP阶段**：专注于"一键抠图"，创建透明背景贴纸
  - **后续阶段**：拓展为全方位AI创意平台，支持多种生成模式
- **技术定位**：整合多种AI模型能力，为用户提供统一简单的使用体验

### 1.5 核心价值主张
"**AI驱动创意，一键生成专业级内容，无需设计技能**"

### 1.6 差异化优势
1. **极简操作**：无需复杂设置，专注用户体验
2. **高质量结果**：利用先进AI模型确保创意内容的专业质量
3. **多模态创作**：从单一功能扩展到支持多种创作模式（MVP后)
4. **成本效益**：比专业软件更经济，比免费工具质量更高
5. **一站式解决方案**：未来将支持从图像到视频的全方位创作需求

## 2. 用户旅程

### 2.1 首次用户旅程
1. 用户首次访问平台首页
2. 浏览产品功能介绍和示例
3. 选择"立即尝试"（免费额度）或直接注册账户
4. 上传第一张图像进行抠图处理
5. 等待AI处理（5-15秒）
6. 预览处理结果，查看透明背景效果
7. 下载透明贴纸或进行简单调整
8. 收到升级提示（获得更多功能和额度）

### 2.2 注册用户旅程
1. 通过邮箱或Google账户登录平台（已实现）
2. 进入个人工作台
3. 上传图像进行处理
4. 查看处理进度
5. 预览和下载结果
6. 管理历史项目
7. 查看剩余额度或升级计划

### 2.3 付费用户旅程
1. 通过现有支付系统升级到Pro或Ultimate套餐（已实现）
2. 享受对应套餐的额度和功能权限
3. 进行批量或高级处理
4. 获取优先处理服务
5. 访问完整历史记录
6. 下载更高质量的输出结果

## 3. 功能规格

### 3.1 用户界面
- **首页**：产品介绍、功能展示、示例展示、明确的行动按钮
- **工作台**：直观的图像上传区、处理状态显示、结果预览区
- **结果页**：多视图预览、透明背景检视、下载选项
- **账户管理**：（已实现）个人信息、订阅管理、使用统计

### 3.2 用户认证（已实现）
- **注册方式**：
  - 邮箱/密码注册
  - Google账户一键登录
  - 访客模式（有限制的免费体验）
- **账户级别**：
  - 访客用户（无需注册，有严格限制）
  - 免费注册用户（有每月配额）
  - Pro和Ultimate付费用户（差异化权限）

### 3.3 图像上传
- **支持格式**：JPG, PNG, WEBP
- **大小限制**：
  - 免费用户：最大5MB
  - Pro用户：最大15MB
  - Ultimate用户：最大25MB
- **分辨率**：建议1024×1024以下（更大分辨率将被自动缩放）
- **上传方式**：
  - 拖放上传
  - 文件选择器
  - 图片URL输入（付费功能）

### 3.4 AI处理核心功能
- **MVP阶段**：
  - **图像抠图**：自动识别主体并移除背景
  - **边缘优化**：智能平滑边缘
  - **透明背景处理**：生成专业级透明贴纸
- **未来扩展**：
  - **文生图**：根据文本描述生成图像
  - **文生视频**：根据文本描述生成短视频
  - **图生视频**：将静态图片转化为动态视频

### 3.5 结果管理
- **预览功能**：
  - 原图/结果对比
  - 多背景预览（透明、白色、黑色、棋盘格）
  - 缩放和详细查看
- **下载选项**：
  - PNG透明背景格式
  - 多分辨率选择（根据用户等级）
- **历史管理**：
  - 处理历史记录
  - 项目保存（差异化存储期限）

### 3.6 付费与订阅（已实现）
- **免费额度**：每月5张图片处理
- **Pro套餐**（$9.9/月 或 $96/年）：
  - 每月100张图片处理额度
  - 高清输出
  - 30天历史记录
  - 基础客户支持
- **Ultimate套餐**（$19.9/月 或 $192/年）：
  - 每月300张图片处理额度
  - 超高清输出
  - 无限历史记录
  - 优先处理队列
  - 优先客户支持

## 4. 技术架构

### 4.1 前端架构（MVP核心优先级）
- **框架**：Next.js App Router（已有框架）
- **UI组件**：
  - 复用现有React组件系统
  - 基于Tailwind CSS和Shadcn UI进行设计优化
  - 增强用户交互体验
- **状态管理**：
  - 使用现有Zustand状态管理
  - 优化请求状态和处理流程
- **核心模块**：
  - 图像上传组件（拖放、预览、验证）
  - AI处理状态实时显示
  - 结果预览与对比组件

### 4.2 后端架构
- **服务框架**：利用现有Next.js API Routes/Server Actions
- **数据存储**：
  - 使用现有PostgreSQL + Drizzle ORM
  - 扩展图像处理相关模型
- **文件存储**：
  - 使用现有S3兼容对象存储
  - 优化图像处理流程
- **核心服务**：
  - 复用现有用户认证服务和支付系统
  - 新增AI处理队列管理
  - 新增AI提供商适配层（MVP核心优先级）

### 4.3 AI服务适配层（MVP核心优先级）
- **主要提供商**：OpenAI 4o API
- **适配器模式**：
  - 构建灵活的接口层，为未来多提供商做准备
  - 标准化处理请求和响应格式
- **未来扩展提供商**：
  - Stability AI（可用于文生图）
  - Anthropic Claude（可用于文生内容）
  - 其他视频生成API

### 4.4 数据库模型
```typescript
// 扩展现有用户表，增加AI处理相关字段
interface User {
  // 现有字段...
  subscription: 'free' | 'pro' | 'ultimate'; // 更新为实际套餐名称
  aiCreditsRemaining: number;
  aiCreditsReset: Date;
}

// 图像处理记录表
interface ImageProcessingRecord {
  id: string;
  userId: string;
  originalImageUrl: string;
  resultImageUrl: string;
  processType: 'background-removal' | 'text-to-image' | 'image-to-video' | 'text-to-video';
  processingOptions: object;
  status: 'pending' | 'processing' | 'completed' | 'failed';
  aiProvider: string;
  processingTime: number;
  createdAt: Date;
}
```

## 5. MVP开发重点与时间线

### 5.1 MVP优先级功能
1. **API调用实现**（最高优先级）
   - OpenAI 4o API集成
   - 图像处理流程搭建
   - 错误处理与重试机制
   - 结果处理与存储

2. **前端界面优化**（次高优先级）
   - 上传组件设计与实现
   - 处理状态实时反馈
   - 结果预览与交互设计
   - 整体用户体验流程优化

3. **利用现有系统**
   - 集成现有用户认证系统
   - 对接已实现的支付系统
   - 复用现有用户管理功能
   - 确保与已有套餐（Pro和Ultimate）的兼容

### 5.2 开发时间线
- **Week 1-2**：API调用实现
  - OpenAI API集成与测试
  - 构建适配器层基础框架
  - 实现基本的图像处理流程

- **Week 3-4**：前端界面开发
  - 设计并实现核心交互界面
  - 优化上传和预览体验
  - 完善结果展示与下载功能

- **Week 5**：测试与发布准备
  - 综合功能测试
  - 性能优化
  - 用户体验最终调整
  - 准备上线

## 6. 未来功能扩展路线图

### 6.1 第二阶段：文生图功能
- **技术实现**：整合适合的文生图API
- **用户体验**：设计简单直观的提示词输入界面
- **特色功能**：提示词辅助、风格预设、结果微调

### 6.2 第三阶段：视频生成功能
- **文生视频**：基于文本描述生成短视频内容
- **图生视频**：将静态图像转换为动态视频
- **视频编辑**：简单的视频参数调整功能

### 6.3 长期产品愿景
- **全方位AI创意平台**：支持从图像到视频的全流程创作
- **高级编辑工具**：更精细的创意控制选项
- **创意社区**：用户作品分享与探索平台
- **API访问**：开放API接口供开发者集成

## 7. 成本控制与监控

### 7.1 API成本管理（MVP关键考量）
- **用量监控**：实时追踪API调用成本
- **配额控制**：严格执行用户套餐限制
- **缓存策略**：适当使用结果缓存减少重复调用
- **批处理优化**：合理排队处理请求

### 7.2 性能监控
- **API响应时间**：监控并优化调用延迟
- **处理成功率**：跟踪失败率并改进
- **用户体验指标**：页面加载和交互性能

## 8. 总结

RoboSticker MVP将专注于通过OpenAI API实现高质量的图像背景移除功能，为用户提供简单易用的透明贴纸生成服务。通过利用项目已有的用户认证和支付系统，我们可以快速构建并发布核心功能，同时为未来的文生图、文生视频和图生视频功能扩展奠定基础。

开发重点将放在两个核心方面：API调用实现和前端界面优化，确保流畅的用户体验和高质量的处理结果。同时，在架构设计上预留足够的扩展空间，为后续功能增长提供支持。
